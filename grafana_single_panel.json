{
  "id": null,
  "uid": "bind-monitor",
  "title": "BIND DNS Monitoring",
  "tags": ["bind", "dns", "prometheus"],
  "timezone": "browser",
  "schemaVersion": 39,
  "version": 1,
  "refresh": "15s",
  "panels": [
    {
      "type": "row",
      "title": "Service Health",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }
    },
    {
      "type": "stat",
      "title": "BIND Service Up",
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 1 },
      "targets": [{ "expr": "bind_up", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "none",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "red", "value": 0 },
            { "color": "green", "value": 1 }
          ]}
        }
      }
    },
    {
      "type": "stat",
      "title": "Resolver Health",
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 1 },
      "targets": [{ "expr": "bind_resolver_health", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "none",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "red", "value": 0 },
            { "color": "green", "value": 1 }
          ]}
        }
      }
    },
    {
      "type": "row",
      "title": "Performance",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 5 }
    },
    {
      "type": "timeSeries",
      "title": "Queries per Second",
      "gridPos": { "h": 6, "w": 12, "x": 0, "y": 6 },
      "targets": [{ "expr": "rate(bind_queries_total[1m])", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "qps",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green" },
            { "color": "yellow", "value": 1000 },
            { "color": "red", "value": 5000 }
          ]}
        }
      }
    },
    {
      "type": "timeSeries",
      "title": "Query Latency (s)",
      "gridPos": { "h": 6, "w": 12, "x": 12, "y": 6 },
      "targets": [{ "expr": "bind_query_latency_seconds", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": 0 },
            { "color": "yellow", "value": 0.05 },
            { "color": "red", "value": 0.2 }
          ]}
        }
      }
    },
    {
      "type": "row",
      "title": "Errors",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 12 }
    },
    {
      "type": "timeSeries",
      "title": "Query Failures per Second",
      "gridPos": { "h": 6, "w": 12, "x": 0, "y": 13 },
      "targets": [{ "expr": "rate(bind_query_failures_total[1m])", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "qps",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green" },
            { "color": "yellow", "value": 1 },
            { "color": "red", "value": 5 }
          ]}
        }
      }
    },
    {
      "type": "timeSeries",
      "title": "Security Events per Second",
      "gridPos": { "h": 6, "w": 12, "x": 12, "y": 13 },
      "targets": [{ "expr": "rate(bind_security_events_total[1m])", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "qps",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green" },
            { "color": "yellow", "value": 1 },
            { "color": "red", "value": 5 }
          ]}
        }
      }
    },
    {
      "type": "row",
      "title": "Accuracy & BGP VIP Difference",
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 19 }
    },
    {
      "type": "stat",
      "title": "Record Accuracy (%)",
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 20 },
      "targets": [{ "expr": "bind_record_accuracy_ratio * 100", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "red", "value": 0 },
            { "color": "yellow", "value": 90 },
            { "color": "green", "value": 99 }
          ]}
        }
      }
    },
    {
      "type": "stat",
      "title": "VIP vs Direct Diff (%)",
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 20 },
      "targets": [{ "expr": "bind_vip_query_diff_ratio * 100", "refId": "A" }],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "thresholds": { "mode": "absolute", "steps": [
            { "color": "green", "value": 0 },
            { "color": "yellow", "value": 5 },
            { "color": "red", "value": 20 }
          ]}
        }
      }
    }
  ],
  "templating": { "list": [] }
}
